<?phpinclude 'pag.php';class metodos {    /*variables a nivel de clase*/    public $conexion;    public $registros;    /*constructor*/    function __construct()    {        $this->conexion=mysqli_connect("127.0.0.1","root","ragg","mb260_10429880_favoritos");        if(!$this->conexion)        {            echo "error";        }           else        {            //echo "exito"."<br>";        }    }    /*metodos*/    function seleccionar($opcionesBusqueda,$pagina,$terminoBusqueda="")    {        $sql;//se alamacenara la sentencia sql a a ejecutar        switch($opcionesBusqueda)        {            case 'url':                $sql="select * from favoritos where url='$terminoBusqueda' or url like '%$terminoBusqueda%'";                $this->registros=mysqli_query($this->conexion,$sql);                break;                     case 'categoria':                 $sql="select * from favoritos where categoria='$terminoBusqueda' or categoria like '%$terminoBusqueda%'";                $this->registros=mysqli_query($this->conexion,$sql);                break;                       case 'comentarios':                $sql="select * from favoritos where comentarios like '%$terminoBusqueda%' or comentarios='$terminoBusqueda'";                $this->registros=mysqli_query($this->conexion,$sql);                break;                        case "todos":                $sql="select * from favoritos where comentarios like '%$terminoBusqueda%' or comentarios='$terminoBusqueda' ";                $sql.="or categoria='$terminoBusqueda' or categoria like '%$terminoBusqueda%' or url='$terminoBusqueda' or url like '%$terminoBusqueda%'";                $this->registros=mysqli_query($this->conexion,$sql);                break;                        default:                $sql="select * from favoritos order by categoria";                $this->registros=mysqli_query($this->conexion,$sql);        }    $this->mostrar($sql,$pagina);    }    private function mostrar($sql,$pagina)    {                $ob=new paginacion();        $ob->paginar($this->conexion,10,$this->registros,$sql,$pagina);            //    $listadominos=array(".com",".es",".org",".net");    //    echo "<table>";    //    while($fila=mysqli_fetch_assoc($this->registros))    //    {    //        $url=$fila['url'];    //    //        $urlacortada="";    //    //        foreach($listadominos as $dominio)    //    //        if(strstr($url,$dominio))    //    //        $urlacortada.=strstr($url,$dominio,true).$dominio;    //    //        $categoria=$fila['categoria'];    //    //        $comentarios=$fila['comentarios'];    //    //        $identificado=$fila['id'];    //    //        $img=$urlacortada.'/favicon.ico';    //    //        echo "<tr>    //    //            <td><img src='$img'/></td>    //    //            <td><a href='$url' target='_blank'>$urlacortada</a></td>    //    //            <td>$categoria</td>    //    //            <td>$comentarios</td>    //    //            <td>    //    //          <form name='miform' method='POST' action='eliminar.php'>    //    //          <input type='hidden' name='id' value=$identificado>    //    //         <input type='image' src='eliminar.png'>    //    //          </form>    //    //            </td>                //    //            <td>    //    //          <form name='miform1' method='POST' action='editar.php'>    //    //          <input type='hidden' name='id' value=$identificado>    //    //          <input type='hidden' name='url' value='$url'>    //    //          <input type='hidden' name='categoria' value='$categoria'>    //    //          <input type='hidden' name='comentario' value='$comentarios'>    //    //          <input type='image' src='editar.png'>    //    //          </form>    //    //            </td>    //    //            </tr>";    //    //}    echo "</table>";    }        function insertar($url,$categoria,$comentarios)    {        mysqli_query($this->conexion,"insert into favoritos (url,categoria,comentarios) values('$url','$categoria','$comentarios')");        header('Location: index.html');    }    function eliminar($identificador)    {        $sql="delete from favoritos where id=$identificador";        //alternativamente se puede usar        //$sql="delete from favoritos where id=".$identificador;        mysqli_query($this->conexion,$sql);        header('Location: favoritos.php');    }        function actualizar($url,$categoria,$comentarios,$identificador)    {        $sql="update favoritos set url='$url', categoria='$categoria', comentarios='$comentarios' ";        $sql.="where id=".$identificador;        mysqli_query($this->conexion,$sql);        header('Location: favoritos.php');        }        function desconectar()    {        mysqli_close($this->conexion);    }        function contar()    {    $sql="select * from favoritos where categoria='programacion'";    $this->registros=mysqli_query($this->conexion,$sql);    $programacion=mysqli_num_rows($this->registros);        $sql="select * from favoritos where categoria='base de datos'";    $this->registros=mysqli_query($this->conexion,$sql);    $bd=mysqli_num_rows($this->registros);        $sql="select * from favoritos where categoria='otra'";    $this->registros=mysqli_query($this->conexion,$sql);    $otra=mysqli_num_rows($this->registros);        $sql="select * from favoritos where categoria='desarrollo web'";    $this->registros=mysqli_query($this->conexion,$sql);    $web=mysqli_num_rows($this->registros);        $sql="select * from favoritos";    $this->registros=mysqli_query($this->conexion,$sql);    $todos=mysqli_num_rows($this->registros);        $sql="select count(categoria) as 'otr' from favoritos where categoria!='programacion' OR categoria!='educacion' OR categoria!='base de datos' OR categoria!='sistemas operativos' OR categoria!='video' OR categoria!='otra'";    $this->registros=mysqli_query($this->conexion,$sql);    $otracategoria=mysqli_num_rows($this->registros);        $sql="select max(id) as 'max' from favoritos";    $this->registros=mysqli_query($this->conexion,$sql);    while($fila=mysqli_fetch_array($this->registros))    {        echo "el ultimo registro tiene el id ".$fila['max']."<br>";    }        echo "hay ".$programacion." favoritos registrados en la categoria programacion"."<br/>";    echo "hay ".$bd." favoritos registrados en la categoria base de datos"."<br/>";    echo "hay ".$otra." favoritos registrados en la categoria otra"."<br/>";    echo "hay ".$web." favoritos registrados en la categoria desarrollo web"."<br/>";    echo "hay ".$otracategoria." favoritos registrados en otras categorias"."<br/>";    echo "hay ".$todos." registros totales"."<br/>";}}/*************************EJEMPLO DE COMO USAR ESTA CLASE****************************///$ob=new metodos();//$ob->insertar("esta es una prueba","cualquier categoria","esta es una url de prueba");//$ob->selecionar("","edu");//$ob->eliminar(168);//$ob->actualizar("http://www.softpedia.com/","desarrollo web","ciclopedia de sw",157);//$ob->contar();?>